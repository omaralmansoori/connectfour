<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Learn Minimax - Connect Four</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  <style>
    .learn-content {
      max-width: 1000px;
      margin: 0 auto;
    }
    .concept-section {
      margin-bottom: 50px;
    }
    .concept-section h2 {
      color: var(--accent);
      margin-bottom: 16px;
      font-size: 28px;
    }
    .concept-section h3 {
      color: var(--text);
      margin: 20px 0 12px;
      font-size: 20px;
    }
    .concept-section p {
      line-height: 1.8;
      color: var(--text);
      margin-bottom: 16px;
    }
    .example-box {
      background: rgba(93, 208, 255, 0.05);
      border: 1px solid rgba(93, 208, 255, 0.2);
      border-radius: 12px;
      padding: 20px;
      margin: 16px 0;
    }
    .example-box strong {
      color: var(--accent);
    }
    .code-snippet {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid var(--panel-border);
      border-radius: 8px;
      padding: 16px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      overflow-x: auto;
      margin: 16px 0;
    }
    .highlight {
      background: rgba(255, 209, 102, 0.15);
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: 600;
      color: var(--ai);
    }
    .algorithm-steps {
      background: rgba(255, 255, 255, 0.03);
      border-left: 4px solid var(--accent);
      padding: 16px 20px;
      margin: 16px 0;
    }
    .algorithm-steps ol {
      margin: 8px 0;
      padding-left: 20px;
    }
    .algorithm-steps li {
      margin: 8px 0;
      line-height: 1.6;
    }
    .visual-demo {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin: 20px 0;
    }
    .demo-card {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid var(--panel-border);
      border-radius: 10px;
      padding: 16px;
      text-align: center;
    }
    .demo-card .label {
      color: var(--muted);
      font-size: 12px;
      margin-bottom: 8px;
    }
    .demo-card .value {
      color: var(--text);
      font-size: 18px;
      font-weight: 700;
    }
    .nav-buttons {
      display: flex;
      gap: 12px;
      margin: 32px 0;
      flex-wrap: wrap;
    }
    .key-point {
      background: rgba(255, 179, 71, 0.08);
      border-left: 4px solid var(--accent-2);
      padding: 16px;
      margin: 16px 0;
      border-radius: 4px;
    }
    .key-point strong {
      color: var(--accent-2);
    }
    
    /* Interactive Tree Diagram Styles */
    .tree-diagram {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 12px;
      padding: 30px;
      margin: 24px 0;
      overflow-x: auto;
    }
    .tree-diagram svg {
      display: block;
      margin: 0 auto;
    }
    .tree-node-static {
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .tree-node-static:hover {
      filter: brightness(1.2);
    }
    .node-max {
      fill: rgba(255, 209, 102, 0.2);
      stroke: #ffd166;
      stroke-width: 2;
    }
    .node-min {
      fill: rgba(255, 93, 115, 0.2);
      stroke: #ff5d73;
      stroke-width: 2;
    }
    .node-best {
      fill: rgba(93, 208, 255, 0.3);
      stroke: #5dd0ff;
      stroke-width: 3;
      filter: drop-shadow(0 0 8px rgba(93, 208, 255, 0.5));
    }
    .node-pruned {
      fill: rgba(100, 100, 100, 0.2);
      stroke: #666;
      stroke-width: 2;
      stroke-dasharray: 5, 3;
      opacity: 0.5;
    }
    .tree-edge-static {
      stroke: rgba(159, 177, 208, 0.4);
      stroke-width: 2;
      fill: none;
    }
    .tree-edge-best {
      stroke: #5dd0ff;
      stroke-width: 3;
      filter: drop-shadow(0 0 4px rgba(93, 208, 255, 0.6));
    }
    .tree-edge-pruned {
      stroke: #666;
      stroke-width: 2;
      stroke-dasharray: 5, 3;
      opacity: 0.5;
    }
    .node-text {
      font-family: system-ui, sans-serif;
      font-size: 12px;
      fill: #e4e9f2;
      text-anchor: middle;
      pointer-events: none;
    }
    .node-score {
      font-weight: 700;
      font-size: 14px;
      fill: #5dd0ff;
    }
    .node-label {
      font-size: 10px;
      fill: #9fb1d0;
    }
    
    /* Animation Controls */
    .animation-controls {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin: 16px 0;
      flex-wrap: wrap;
    }
    .anim-btn {
      background: rgba(93, 208, 255, 0.1);
      border: 1px solid rgba(93, 208, 255, 0.3);
      color: #5dd0ff;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s ease;
    }
    .anim-btn:hover {
      background: rgba(93, 208, 255, 0.2);
      border-color: rgba(93, 208, 255, 0.5);
    }
    .anim-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .anim-btn.active {
      background: rgba(93, 208, 255, 0.3);
      border-color: #5dd0ff;
    }
    
    /* Step indicator */
    .step-indicator {
      text-align: center;
      color: var(--muted);
      font-size: 14px;
      margin: 12px 0;
    }
    .step-indicator .current-step {
      color: var(--accent);
      font-weight: 700;
    }
    
    /* Explanation box */
    .step-explanation {
      background: rgba(93, 208, 255, 0.08);
      border: 1px solid rgba(93, 208, 255, 0.2);
      border-radius: 10px;
      padding: 16px;
      margin: 16px 0;
      min-height: 60px;
      transition: all 0.3s ease;
    }
    .step-explanation h4 {
      color: var(--accent);
      margin: 0 0 8px 0;
      font-size: 16px;
    }
    .step-explanation p {
      margin: 0;
      color: var(--text);
      line-height: 1.6;
    }
    
    /* Comparison table */
    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }
    .comparison-table th,
    .comparison-table td {
      padding: 12px 16px;
      text-align: left;
      border: 1px solid var(--panel-border);
    }
    .comparison-table th {
      background: rgba(93, 208, 255, 0.1);
      color: var(--accent);
      font-weight: 600;
    }
    .comparison-table tr:nth-child(even) {
      background: rgba(255, 255, 255, 0.02);
    }
    .comparison-table .good {
      color: #4ade80;
    }
    .comparison-table .bad {
      color: #f87171;
    }
    
    /* Interactive TicTacToe mini board */
    .mini-board {
      display: inline-grid;
      grid-template-columns: repeat(3, 40px);
      gap: 4px;
      background: rgba(0, 0, 0, 0.3);
      padding: 8px;
      border-radius: 8px;
      vertical-align: middle;
    }
    .mini-cell {
      width: 40px;
      height: 40px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: 700;
    }
    .mini-cell.x { color: #ff5d73; }
    .mini-cell.o { color: #ffd166; }
    
    /* Flowchart styles */
    .flowchart {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      margin: 24px 0;
    }
    .flow-box {
      background: rgba(93, 208, 255, 0.1);
      border: 2px solid rgba(93, 208, 255, 0.3);
      border-radius: 10px;
      padding: 14px 24px;
      text-align: center;
      min-width: 200px;
      transition: all 0.3s ease;
    }
    .flow-box:hover {
      border-color: var(--accent);
      background: rgba(93, 208, 255, 0.15);
    }
    .flow-box.decision {
      background: rgba(255, 179, 71, 0.1);
      border-color: rgba(255, 179, 71, 0.3);
      transform: rotate(0deg);
      clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
      padding: 30px 40px;
    }
    .flow-box.terminal {
      background: rgba(255, 93, 115, 0.1);
      border-color: rgba(255, 93, 115, 0.3);
      border-radius: 20px;
    }
    .flow-arrow {
      color: var(--muted);
      font-size: 24px;
    }
    .flow-branch {
      display: flex;
      gap: 40px;
      align-items: flex-start;
    }
    .flow-branch-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }
    .flow-label {
      font-size: 12px;
      color: var(--muted);
    }
    
    /* Pseudocode styles */
    .pseudocode {
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid var(--panel-border);
      border-radius: 10px;
      padding: 20px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.8;
      overflow-x: auto;
      margin: 20px 0;
    }
    .pseudocode .keyword {
      color: #c792ea;
      font-weight: 600;
    }
    .pseudocode .function {
      color: #82aaff;
    }
    .pseudocode .comment {
      color: #676e95;
      font-style: italic;
    }
    .pseudocode .number {
      color: #f78c6c;
    }
    .pseudocode .string {
      color: #c3e88d;
    }
    .pseudocode .highlight-line {
      background: rgba(93, 208, 255, 0.1);
      display: block;
      margin: 0 -20px;
      padding: 0 20px;
      border-left: 3px solid var(--accent);
    }
    
    /* Complexity visualization */
    .complexity-chart {
      display: flex;
      align-items: flex-end;
      gap: 20px;
      height: 200px;
      padding: 20px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 12px;
      margin: 20px 0;
    }
    .complexity-bar {
      flex: 1;
      background: linear-gradient(to top, rgba(93, 208, 255, 0.3), rgba(93, 208, 255, 0.8));
      border-radius: 6px 6px 0 0;
      position: relative;
      min-width: 60px;
      transition: height 0.5s ease;
    }
    .complexity-bar.pruned {
      background: linear-gradient(to top, rgba(76, 175, 80, 0.3), rgba(76, 175, 80, 0.8));
    }
    .complexity-bar .bar-label {
      position: absolute;
      bottom: -30px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 12px;
      color: var(--muted);
      white-space: nowrap;
    }
    .complexity-bar .bar-value {
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 12px;
      font-weight: 700;
      color: var(--accent);
    }
  </style>
</head>
<body>
  <div class="page learn-content">
    <h1>üéì Learn Minimax Algorithm</h1>
    <p class="subtitle">Understanding how AI makes decisions in adversarial games</p>
    
    <div class="nav-buttons">
      <a href="{{ url_for('play') }}" class="btn secondary">‚Üê Back to Game</a>
      <a href="{{ url_for('analysis') }}" class="btn secondary">üîç View AI Analysis</a>
      <a href="{{ url_for('tictactoe') }}" class="btn secondary">‚ùå‚≠ï Explore Tic-Tac-Toe</a>
    </div>

    <div class="concept-section">
      <h2>What is Minimax?</h2>
      <p>
        The <span class="highlight">Minimax algorithm</span> is a decision-making strategy used in two-player, 
        turn-based games where one player tries to maximize their advantage while the other tries to minimize it. 
        The algorithm "thinks ahead" by exploring possible future moves and counter-moves.
      </p>
      
      <div class="key-point">
        <strong>Key Insight:</strong> In Connect Four, the AI assumes the human player will always make the best possible move. 
        By considering all possible responses, the AI can choose the move that gives it the best outcome even against perfect play.
      </div>

      <div class="visual-demo">
        <div class="demo-card">
          <div class="label">Maximizer</div>
          <div class="value">ü§ñ AI Player</div>
          <p style="font-size: 12px; color: var(--muted); margin-top: 8px;">Tries to get the highest score</p>
        </div>
        <div class="demo-card">
          <div class="label">Minimizer</div>
          <div class="value">üë§ Human Player</div>
          <p style="font-size: 12px; color: var(--muted); margin-top: 8px;">Tries to get the lowest score</p>
        </div>
      </div>
      
      <!-- Simple Tic-Tac-Toe Example -->
      <h3>üìñ Simple Example: Tic-Tac-Toe</h3>
      <p>Let's understand minimax with a simple Tic-Tac-Toe scenario. Consider this board state where it's O's turn (AI):</p>
      
      <div style="display: flex; align-items: center; gap: 40px; flex-wrap: wrap; justify-content: center; margin: 24px 0;">
        <div style="text-align: center;">
          <div class="mini-board">
            <div class="mini-cell x">X</div>
            <div class="mini-cell x">X</div>
            <div class="mini-cell"></div>
            <div class="mini-cell o">O</div>
            <div class="mini-cell o">O</div>
            <div class="mini-cell"></div>
            <div class="mini-cell"></div>
            <div class="mini-cell"></div>
            <div class="mini-cell x">X</div>
          </div>
          <p style="font-size: 12px; color: var(--muted); margin-top: 8px;">Current State</p>
        </div>
        <div style="font-size: 32px; color: var(--muted);">‚Üí</div>
        <div style="text-align: center;">
          <div class="mini-board">
            <div class="mini-cell x">X</div>
            <div class="mini-cell x">X</div>
            <div class="mini-cell"></div>
            <div class="mini-cell o">O</div>
            <div class="mini-cell o">O</div>
            <div class="mini-cell o" style="background: rgba(93, 208, 255, 0.2);">O</div>
            <div class="mini-cell"></div>
            <div class="mini-cell"></div>
            <div class="mini-cell x">X</div>
          </div>
          <p style="font-size: 12px; color: var(--accent); margin-top: 8px;">Best Move: Win!</p>
        </div>
      </div>
      
      <p>The AI evaluates all possible moves and sees that placing O in the middle-right position completes a winning row (O-O-O). The minimax algorithm assigns this move the highest score (+10 for a win).</p>
    </div>

    <div class="concept-section">
      <h2>How Does It Work?</h2>
      <p>
        The minimax algorithm builds a <span class="highlight">search tree</span> of possible game states. 
        Each node in the tree represents a board position, and edges represent moves.
      </p>

      <div class="algorithm-steps">
        <h3>The Minimax Process:</h3>
        <ol>
          <li><strong>Start from current position:</strong> The root node represents the current game state.</li>
          <li><strong>Generate possible moves:</strong> For each valid column, simulate dropping a piece.</li>
          <li><strong>Recursively explore:</strong> For each move, imagine the opponent's best response, then your best counter-response, and so on.</li>
          <li><strong>Evaluate leaf nodes:</strong> When you reach the search depth limit or a game-ending state, assign a score.</li>
          <li><strong>Propagate scores upward:</strong> 
            <ul>
              <li>At maximizer nodes (AI), choose the move with the <strong>highest</strong> score</li>
              <li>At minimizer nodes (Human), choose the move with the <strong>lowest</strong> score</li>
            </ul>
          </li>
          <li><strong>Select best move:</strong> The AI chooses the move that leads to the best outcome.</li>
        </ol>
      </div>
      
      <!-- Interactive Tree Diagram -->
      <h3>üå≥ Interactive Minimax Tree Example</h3>
      <p>Below is a simplified minimax tree. Click "Step Through" to see how the algorithm evaluates nodes from bottom to top:</p>
      
      <div class="tree-diagram" id="minimaxTreeDemo">
        <svg width="700" height="380" viewBox="0 0 700 380" id="minimaxSvg">
          <!-- Edges -->
          <path class="tree-edge-static" d="M350,60 L150,140" id="edge1"/>
          <path class="tree-edge-static" d="M350,60 L350,140" id="edge2"/>
          <path class="tree-edge-static" d="M350,60 L550,140" id="edge3"/>
          <path class="tree-edge-static" d="M150,180 L80,260" id="edge4"/>
          <path class="tree-edge-static" d="M150,180 L220,260" id="edge5"/>
          <path class="tree-edge-static" d="M350,180 L280,260" id="edge6"/>
          <path class="tree-edge-static" d="M350,180 L420,260" id="edge7"/>
          <path class="tree-edge-static" d="M550,180 L480,260" id="edge8"/>
          <path class="tree-edge-static" d="M550,180 L620,260" id="edge9"/>
          
          <!-- Level 0 - Root (MAX) -->
          <g class="tree-node-static" id="node-root">
            <rect x="300" y="30" width="100" height="50" rx="8" class="node-max"/>
            <text x="350" y="50" class="node-text node-label">MAX (AI)</text>
            <text x="350" y="68" class="node-text node-score" id="score-root">?</text>
          </g>
          
          <!-- Level 1 - MIN nodes -->
          <g class="tree-node-static" id="node-1">
            <rect x="100" y="120" width="100" height="50" rx="8" class="node-min"/>
            <text x="150" y="140" class="node-text node-label">MIN (Human)</text>
            <text x="150" y="158" class="node-text node-score" id="score-1">?</text>
          </g>
          <g class="tree-node-static" id="node-2">
            <rect x="300" y="120" width="100" height="50" rx="8" class="node-min"/>
            <text x="350" y="140" class="node-text node-label">MIN (Human)</text>
            <text x="350" y="158" class="node-text node-score" id="score-2">?</text>
          </g>
          <g class="tree-node-static" id="node-3">
            <rect x="500" y="120" width="100" height="50" rx="8" class="node-min"/>
            <text x="550" y="140" class="node-text node-label">MIN (Human)</text>
            <text x="550" y="158" class="node-text node-score" id="score-3">?</text>
          </g>
          
          <!-- Level 2 - Leaf nodes (evaluation scores) -->
          <g class="tree-node-static" id="node-4">
            <rect x="40" y="240" width="80" height="45" rx="8" class="node-max"/>
            <text x="80" y="258" class="node-text node-label">Eval</text>
            <text x="80" y="275" class="node-text node-score" style="fill: #4ade80;">+3</text>
          </g>
          <g class="tree-node-static" id="node-5">
            <rect x="180" y="240" width="80" height="45" rx="8" class="node-max"/>
            <text x="220" y="258" class="node-text node-label">Eval</text>
            <text x="220" y="275" class="node-text node-score" style="fill: #4ade80;">+5</text>
          </g>
          <g class="tree-node-static" id="node-6">
            <rect x="240" y="240" width="80" height="45" rx="8" class="node-max"/>
            <text x="280" y="258" class="node-text node-label">Eval</text>
            <text x="280" y="275" class="node-text node-score" style="fill: #f87171;">-2</text>
          </g>
          <g class="tree-node-static" id="node-7">
            <rect x="380" y="240" width="80" height="45" rx="8" class="node-max"/>
            <text x="420" y="258" class="node-text node-label">Eval</text>
            <text x="420" y="275" class="node-text node-score" style="fill: #4ade80;">+7</text>
          </g>
          <g class="tree-node-static" id="node-8">
            <rect x="440" y="240" width="80" height="45" rx="8" class="node-max"/>
            <text x="480" y="258" class="node-text node-label">Eval</text>
            <text x="480" y="275" class="node-text node-score" style="fill: #f87171;">-4</text>
          </g>
          <g class="tree-node-static" id="node-9">
            <rect x="580" y="240" width="80" height="45" rx="8" class="node-max"/>
            <text x="620" y="258" class="node-text node-label">Eval</text>
            <text x="620" y="275" class="node-text node-score" style="fill: #4ade80;">+2</text>
          </g>
          
          <!-- Labels for moves -->
          <text x="240" y="95" class="node-text node-label" style="font-size: 11px;">Col 1</text>
          <text x="350" y="95" class="node-text node-label" style="font-size: 11px;">Col 2</text>
          <text x="460" y="95" class="node-text node-label" style="font-size: 11px;">Col 3</text>
        </svg>
      </div>
      
      <div class="animation-controls">
        <button class="anim-btn" id="resetTreeBtn">‚ü≤ Reset</button>
        <button class="anim-btn" id="stepTreeBtn">Step ‚Üí</button>
        <button class="anim-btn" id="autoTreeBtn">‚ñ∂ Auto Play</button>
      </div>
      
      <div class="step-indicator">
        Step <span class="current-step" id="treeStepNum">0</span> of <span id="treeTotalSteps">7</span>
      </div>
      
      <div class="step-explanation" id="treeExplanation">
        <h4>üéØ How to Read This Tree</h4>
        <p>Yellow nodes are <strong>MAX</strong> (AI wants highest score). Red nodes are <strong>MIN</strong> (Human wants lowest score). Click "Step" to see how scores propagate up the tree!</p>
      </div>
      
      <!-- Flowchart of the algorithm -->
      <h3>üìä Algorithm Flowchart</h3>
      <div class="flowchart">
        <div class="flow-box">üéÆ Current Game State</div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-box">Generate All Possible Moves</div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-box">For Each Move: Simulate & Recurse</div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-branch">
          <div class="flow-branch-item">
            <div class="flow-label">Terminal State?</div>
            <div class="flow-box terminal">Return Score<br/>(Win/Lose/Draw)</div>
          </div>
          <div class="flow-branch-item">
            <div class="flow-label">Max Depth?</div>
            <div class="flow-box terminal">Evaluate Position<br/>(Heuristic)</div>
          </div>
          <div class="flow-branch-item">
            <div class="flow-label">Otherwise</div>
            <div class="flow-box">Continue Recursion</div>
          </div>
        </div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-box">Propagate Best Score Up</div>
        <div class="flow-arrow">‚Üì</div>
        <div class="flow-box" style="border-color: var(--accent); background: rgba(93, 208, 255, 0.15);">‚úÖ Select Move with Best Score</div>
      </div>
      
      <!-- Pseudocode -->
      <h3>üíª Pseudocode</h3>
      <div class="pseudocode">
<span class="keyword">function</span> <span class="function">minimax</span>(node, depth, isMaximizing):
    <span class="comment">// Base case: terminal state or depth limit</span>
    <span class="keyword">if</span> depth == <span class="number">0</span> <span class="keyword">or</span> isGameOver(node):
        <span class="keyword">return</span> evaluate(node)
    
    <span class="keyword">if</span> isMaximizing:  <span class="comment">// AI's turn - wants highest score</span>
<span class="highlight-line">        maxEval = -‚àû
        <span class="keyword">for each</span> child <span class="keyword">in</span> node.children:
            eval = minimax(child, depth - <span class="number">1</span>, <span class="keyword">false</span>)
            maxEval = max(maxEval, eval)
        <span class="keyword">return</span> maxEval</span>
    <span class="keyword">else</span>:  <span class="comment">// Human's turn - wants lowest score</span>
        minEval = +‚àû
        <span class="keyword">for each</span> child <span class="keyword">in</span> node.children:
            eval = minimax(child, depth - <span class="number">1</span>, <span class="keyword">true</span>)
            minEval = min(minEval, eval)
        <span class="keyword">return</span> minEval
      </div>
    </div>

    <div class="concept-section">
      <h2>Scoring System</h2>
      <p>
        The AI evaluates positions using a <span class="highlight">heuristic function</span> that assigns numerical scores:
      </p>

      <div class="example-box">
        <strong>Positive Scores:</strong> Favorable for the AI
        <ul style="margin: 8px 0 0 20px;">
          <li><strong>+1000:</strong> AI wins the game</li>
          <li><strong>+10 to +50:</strong> AI has two or three pieces in a row with potential to connect four</li>
        </ul>
      </div>

      <div class="example-box">
        <strong>Negative Scores:</strong> Favorable for the Human
        <ul style="margin: 8px 0 0 20px;">
          <li><strong>-1000:</strong> Human wins the game</li>
          <li><strong>-10 to -50:</strong> Human has two or three pieces in a row with potential to connect four</li>
        </ul>
      </div>

      <div class="example-box">
        <strong>Zero Score:</strong> Neutral position with no clear advantage
      </div>
      
      <!-- Score visualization chart -->
      <h3>üìà Score Visualization</h3>
      <div style="display: flex; align-items: center; margin: 24px 0; gap: 10px;">
        <div style="text-align: center; padding: 10px;">
          <div style="font-size: 24px;">üòû</div>
          <div style="font-size: 12px; color: #ff5d73;">-1000</div>
          <div style="font-size: 10px; color: var(--muted);">AI Loses</div>
        </div>
        <div style="flex: 1; height: 40px; background: linear-gradient(to right, #ff5d73, #666, #4ade80); border-radius: 20px; position: relative;">
          <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 4px; height: 50px; background: white;"></div>
          <div style="position: absolute; top: -20px; left: 50%; transform: translateX(-50%); font-size: 12px; color: var(--muted);">0</div>
        </div>
        <div style="text-align: center; padding: 10px;">
          <div style="font-size: 24px;">üòä</div>
          <div style="font-size: 12px; color: #4ade80;">+1000</div>
          <div style="font-size: 10px; color: var(--muted);">AI Wins</div>
        </div>
      </div>
      
      <!-- Connect Four scoring examples -->
      <h3>üéØ Connect Four Scoring Examples</h3>
      <div class="visual-demo" style="grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));">
        <div class="demo-card">
          <div style="display: flex; gap: 4px; justify-content: center; margin-bottom: 10px;">
            <div style="width: 25px; height: 25px; border-radius: 50%; background: #ffd166;"></div>
            <div style="width: 25px; height: 25px; border-radius: 50%; background: #ffd166;"></div>
            <div style="width: 25px; height: 25px; border-radius: 50%; background: #ffd166;"></div>
            <div style="width: 25px; height: 25px; border-radius: 50%; background: #ffd166;"></div>
          </div>
          <div class="value" style="color: #4ade80;">+1000</div>
          <div class="label">AI Wins!</div>
        </div>
        <div class="demo-card">
          <div style="display: flex; gap: 4px; justify-content: center; margin-bottom: 10px;">
            <div style="width: 25px; height: 25px; border-radius: 50%; background: #ffd166;"></div>
            <div style="width: 25px; height: 25px; border-radius: 50%; background: #ffd166;"></div>
            <div style="width: 25px; height: 25px; border-radius: 50%; background: #ffd166;"></div>
            <div style="width: 25px; height: 25px; border-radius: 50%; border: 2px dashed #ffd166; opacity: 0.5;"></div>
          </div>
          <div class="value" style="color: #4ade80;">+50</div>
          <div class="label">3 in a row (open)</div>
        </div>
        <div class="demo-card">
          <div style="display: flex; gap: 4px; justify-content: center; margin-bottom: 10px;">
            <div style="width: 25px; height: 25px; border-radius: 50%; background: #ffd166;"></div>
            <div style="width: 25px; height: 25px; border-radius: 50%; background: #ffd166;"></div>
            <div style="width: 25px; height: 25px; border-radius: 50%; border: 2px dashed #ffd166; opacity: 0.5;"></div>
            <div style="width: 25px; height: 25px; border-radius: 50%; border: 2px dashed #ffd166; opacity: 0.5;"></div>
          </div>
          <div class="value" style="color: #4ade80;">+10</div>
          <div class="label">2 in a row (open)</div>
        </div>
        <div class="demo-card">
          <div style="display: flex; gap: 4px; justify-content: center; margin-bottom: 10px;">
            <div style="width: 25px; height: 25px; border-radius: 50%; background: #ff5d73;"></div>
            <div style="width: 25px; height: 25px; border-radius: 50%; background: #ff5d73;"></div>
            <div style="width: 25px; height: 25px; border-radius: 50%; background: #ff5d73;"></div>
            <div style="width: 25px; height: 25px; border-radius: 50%; border: 2px dashed #ff5d73; opacity: 0.5;"></div>
          </div>
          <div class="value" style="color: #f87171;">-50</div>
          <div class="label">Human threat!</div>
        </div>
      </div>
    </div>

    <div class="concept-section">
      <h2>Alpha-Beta Pruning</h2>
      <p>
        Minimax can be slow because it explores many positions. <span class="highlight">Alpha-beta pruning</span> 
        is an optimization that skips branches of the tree that won't affect the final decision.
      </p>

      <div class="key-point">
        <strong>How it works:</strong> If we find a move that's worse than something we've already discovered, 
        we can stop exploring that branch. This dramatically reduces the number of positions evaluated 
        without changing the result.
      </div>

      <div class="visual-demo">
        <div class="demo-card">
          <div class="label">Without Pruning</div>
          <div class="value">~5,000,000</div>
          <p style="font-size: 12px; color: var(--muted); margin-top: 8px;">nodes at depth 6</p>
        </div>
        <div class="demo-card">
          <div class="label">With Pruning</div>
          <div class="value" style="color: #4ade80;">~50,000</div>
          <p style="font-size: 12px; color: var(--muted); margin-top: 8px;">nodes at depth 6</p>
        </div>
      </div>
      
      <!-- Alpha-Beta Tree Visualization -->
      <h3>‚úÇÔ∏è Alpha-Beta Pruning Example</h3>
      <p>Watch how alpha-beta pruning eliminates unnecessary branches. Gray dashed nodes are <strong>pruned</strong> (never evaluated):</p>
      
      <div class="tree-diagram" id="alphaBetaDemo">
        <svg width="700" height="350" viewBox="0 0 700 350" id="alphaBetaSvg">
          <!-- Edges -->
          <path class="tree-edge-static tree-edge-best" d="M350,50 L175,120"/>
          <path class="tree-edge-static" d="M350,50 L525,120"/>
          <path class="tree-edge-static tree-edge-best" d="M175,160 L100,230"/>
          <path class="tree-edge-static" d="M175,160 L250,230"/>
          <path class="tree-edge-static" d="M525,160 L450,230"/>
          <path class="tree-edge-pruned" d="M525,160 L600,230" id="prunedEdge"/>
          
          <!-- Root MAX -->
          <g class="tree-node-static">
            <rect x="300" y="20" width="100" height="50" rx="8" class="node-max node-best"/>
            <text x="350" y="40" class="node-text node-label">MAX</text>
            <text x="350" y="58" class="node-text node-score">Œ±=3</text>
          </g>
          
          <!-- Level 1 MIN -->
          <g class="tree-node-static">
            <rect x="125" y="100" width="100" height="50" rx="8" class="node-min node-best"/>
            <text x="175" y="120" class="node-text node-label">MIN</text>
            <text x="175" y="138" class="node-text node-score">3</text>
          </g>
          <g class="tree-node-static">
            <rect x="475" y="100" width="100" height="50" rx="8" class="node-min"/>
            <text x="525" y="120" class="node-text node-label">MIN</text>
            <text x="525" y="138" class="node-text node-score">‚â§2</text>
          </g>
          
          <!-- Level 2 Leaves -->
          <g class="tree-node-static">
            <rect x="60" y="210" width="80" height="45" rx="8" class="node-max node-best"/>
            <text x="100" y="228" class="node-text node-label">Eval</text>
            <text x="100" y="245" class="node-text node-score" style="fill: #4ade80;">3</text>
          </g>
          <g class="tree-node-static">
            <rect x="210" y="210" width="80" height="45" rx="8" class="node-max"/>
            <text x="250" y="228" class="node-text node-label">Eval</text>
            <text x="250" y="245" class="node-text node-score" style="fill: #4ade80;">5</text>
          </g>
          <g class="tree-node-static">
            <rect x="410" y="210" width="80" height="45" rx="8" class="node-max"/>
            <text x="450" y="228" class="node-text node-label">Eval</text>
            <text x="450" y="245" class="node-text node-score" style="fill: #4ade80;">2</text>
          </g>
          <g class="tree-node-static" id="prunedNode">
            <rect x="560" y="210" width="80" height="45" rx="8" class="node-pruned"/>
            <text x="600" y="228" class="node-text node-label" style="fill: #666;">Eval</text>
            <text x="600" y="245" class="node-text node-score" style="fill: #666;">?</text>
          </g>
          
          <!-- Pruning annotation -->
          <text x="600" y="280" style="font-size: 11px; fill: #ff5d73; text-anchor: middle;">‚úÇÔ∏è PRUNED!</text>
          <text x="600" y="295" style="font-size: 10px; fill: #9fb1d0; text-anchor: middle;">Œ≤ ‚â§ Œ± cutoff</text>
        </svg>
      </div>
      
      <div class="step-explanation">
        <h4>ü§î Why was this pruned?</h4>
        <p>The MAX node at root found a guaranteed score of <strong>3</strong> from the left branch. When exploring the right branch, MIN found a value of <strong>2</strong>. Since MIN will choose ‚â§2 (trying to minimize), and MAX already has a better option (3), there's no need to explore further children of the right MIN node!</p>
      </div>
      
      <!-- Complexity comparison chart -->
      <h3>üìä Complexity Reduction</h3>
      <div class="complexity-chart">
        <div class="complexity-bar" style="height: 180px;">
          <span class="bar-value">5M</span>
          <span class="bar-label">Depth 6<br/>No Pruning</span>
        </div>
        <div class="complexity-bar pruned" style="height: 18px;">
          <span class="bar-value">50K</span>
          <span class="bar-label">Depth 6<br/>With Pruning</span>
        </div>
        <div class="complexity-bar" style="height: 160px;">
          <span class="bar-value">2M</span>
          <span class="bar-label">Depth 5<br/>No Pruning</span>
        </div>
        <div class="complexity-bar pruned" style="height: 12px;">
          <span class="bar-value">20K</span>
          <span class="bar-label">Depth 5<br/>With Pruning</span>
        </div>
      </div>
      
      <!-- Alpha-Beta Pseudocode -->
      <h3>üíª Alpha-Beta Pseudocode</h3>
      <div class="pseudocode">
<span class="keyword">function</span> <span class="function">alphabeta</span>(node, depth, Œ±, Œ≤, isMaximizing):
    <span class="keyword">if</span> depth == <span class="number">0</span> <span class="keyword">or</span> isGameOver(node):
        <span class="keyword">return</span> evaluate(node)
    
    <span class="keyword">if</span> isMaximizing:
        value = -‚àû
        <span class="keyword">for each</span> child <span class="keyword">in</span> node.children:
            value = max(value, alphabeta(child, depth-<span class="number">1</span>, Œ±, Œ≤, <span class="keyword">false</span>))
<span class="highlight-line">            Œ± = max(Œ±, value)
            <span class="keyword">if</span> Œ≤ ‚â§ Œ±:
                <span class="keyword">break</span>  <span class="comment">// Œ≤ cutoff - prune!</span></span>
        <span class="keyword">return</span> value
    <span class="keyword">else</span>:
        value = +‚àû
        <span class="keyword">for each</span> child <span class="keyword">in</span> node.children:
            value = min(value, alphabeta(child, depth-<span class="number">1</span>, Œ±, Œ≤, <span class="keyword">true</span>))
            Œ≤ = min(Œ≤, value)
            <span class="keyword">if</span> Œ≤ ‚â§ Œ±:
                <span class="keyword">break</span>  <span class="comment">// Œ± cutoff - prune!</span>
        <span class="keyword">return</span> value
      </div>
      
      <div class="key-point">
        <strong>üí° Key Variables:</strong>
        <ul style="margin: 8px 0 0 20px;">
          <li><strong>Œ± (alpha):</strong> The best value MAX can guarantee so far</li>
          <li><strong>Œ≤ (beta):</strong> The best value MIN can guarantee so far</li>
          <li><strong>Cutoff:</strong> When Œ≤ ‚â§ Œ±, we can stop searching this branch</li>
        </ul>
      </div>
    </div>

    <div class="concept-section">
      <h2>Search Depth</h2>
      <p>
        The <span class="highlight">search depth</span> determines how many moves ahead the AI looks. 
        A deeper search makes the AI stronger but slower.
      </p>

      <!-- Depth comparison table -->
      <table class="comparison-table">
        <thead>
          <tr>
            <th>Depth</th>
            <th>Moves Ahead</th>
            <th>Speed</th>
            <th>Strength</th>
            <th>Typical Nodes</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>2</strong></td>
            <td>1 each player</td>
            <td class="good">‚ö° Very Fast</td>
            <td class="bad">Weak</td>
            <td>~50</td>
          </tr>
          <tr>
            <td><strong>4</strong></td>
            <td>2 each player</td>
            <td class="good">‚ö° Fast</td>
            <td>Moderate</td>
            <td>~2,500</td>
          </tr>
          <tr>
            <td><strong>6</strong></td>
            <td>3 each player</td>
            <td>Balanced</td>
            <td class="good">Strong</td>
            <td>~50,000</td>
          </tr>
          <tr>
            <td><strong>8</strong></td>
            <td>4 each player</td>
            <td class="bad">üê¢ Slow</td>
            <td class="good">Very Strong</td>
            <td>~1,000,000</td>
          </tr>
        </tbody>
      </table>

      <div class="example-box">
        <strong>Depth 2:</strong> AI looks 1 move ahead for itself, then 1 move for the opponent (fast, weak)
      </div>
      <div class="example-box">
        <strong>Depth 4:</strong> AI plans 2 moves ahead for each player (balanced)
      </div>
      <div class="example-box">
        <strong>Depth 6:</strong> AI plans 3 moves ahead for each player (slower, stronger)
      </div>
      <div class="example-box">
        <strong>Depth 8:</strong> AI plans 4 moves ahead for each player (very slow, very strong)
      </div>
      
      <!-- Depth visualization -->
      <h3>üî≠ Depth Visualization</h3>
      <p>See how much further the AI "sees" with increasing depth:</p>
      
      <div class="tree-diagram">
        <svg width="700" height="200" viewBox="0 0 700 200">
          <!-- Depth 2 -->
          <g transform="translate(50, 0)">
            <text x="60" y="20" style="font-size: 14px; fill: var(--accent); font-weight: bold;">Depth 2</text>
            <circle cx="60" cy="50" r="15" fill="rgba(255, 209, 102, 0.3)" stroke="#ffd166" stroke-width="2"/>
            <text x="60" y="55" class="node-text" style="font-size: 10px;">AI</text>
            <line x1="45" y1="65" x2="30" y2="90" stroke="#9fb1d0" stroke-width="2"/>
            <line x1="75" y1="65" x2="90" y2="90" stroke="#9fb1d0" stroke-width="2"/>
            <circle cx="30" cy="105" r="12" fill="rgba(255, 93, 115, 0.3)" stroke="#ff5d73" stroke-width="2"/>
            <circle cx="90" cy="105" r="12" fill="rgba(255, 93, 115, 0.3)" stroke="#ff5d73" stroke-width="2"/>
            <text x="60" y="150" style="font-size: 11px; fill: var(--muted); text-anchor: middle;">~50 nodes</text>
            <text x="60" y="170" style="font-size: 11px; fill: #4ade80; text-anchor: middle;">< 1ms</text>
          </g>
          
          <!-- Depth 4 -->
          <g transform="translate(200, 0)">
            <text x="75" y="20" style="font-size: 14px; fill: var(--accent); font-weight: bold;">Depth 4</text>
            <circle cx="75" cy="50" r="15" fill="rgba(255, 209, 102, 0.3)" stroke="#ffd166" stroke-width="2"/>
            <line x1="55" y1="65" x2="35" y2="85" stroke="#9fb1d0" stroke-width="2"/>
            <line x1="95" y1="65" x2="115" y2="85" stroke="#9fb1d0" stroke-width="2"/>
            <circle cx="35" cy="95" r="10" fill="rgba(255, 93, 115, 0.3)" stroke="#ff5d73" stroke-width="2"/>
            <circle cx="115" cy="95" r="10" fill="rgba(255, 93, 115, 0.3)" stroke="#ff5d73" stroke-width="2"/>
            <line x1="25" y1="105" x2="15" y2="120" stroke="#9fb1d0" stroke-width="1.5"/>
            <line x1="45" y1="105" x2="55" y2="120" stroke="#9fb1d0" stroke-width="1.5"/>
            <line x1="105" y1="105" x2="95" y2="120" stroke="#9fb1d0" stroke-width="1.5"/>
            <line x1="125" y1="105" x2="135" y2="120" stroke="#9fb1d0" stroke-width="1.5"/>
            <circle cx="15" cy="128" r="8" fill="rgba(255, 209, 102, 0.2)" stroke="#ffd166" stroke-width="1.5"/>
            <circle cx="55" cy="128" r="8" fill="rgba(255, 209, 102, 0.2)" stroke="#ffd166" stroke-width="1.5"/>
            <circle cx="95" cy="128" r="8" fill="rgba(255, 209, 102, 0.2)" stroke="#ffd166" stroke-width="1.5"/>
            <circle cx="135" cy="128" r="8" fill="rgba(255, 209, 102, 0.2)" stroke="#ffd166" stroke-width="1.5"/>
            <text x="75" y="160" style="font-size: 11px; fill: var(--muted); text-anchor: middle;">~2.5K nodes</text>
            <text x="75" y="178" style="font-size: 11px; fill: #4ade80; text-anchor: middle;">~10ms</text>
          </g>
          
          <!-- Depth 6 -->
          <g transform="translate(380, 0)">
            <text x="75" y="20" style="font-size: 14px; fill: var(--accent); font-weight: bold;">Depth 6</text>
            <circle cx="75" cy="45" r="12" fill="rgba(255, 209, 102, 0.3)" stroke="#ffd166" stroke-width="2"/>
            <line x1="55" y1="57" x2="30" y2="72" stroke="#9fb1d0" stroke-width="2"/>
            <line x1="95" y1="57" x2="120" y2="72" stroke="#9fb1d0" stroke-width="2"/>
            <circle cx="30" cy="82" r="8" fill="rgba(255, 93, 115, 0.3)" stroke="#ff5d73" stroke-width="1.5"/>
            <circle cx="120" cy="82" r="8" fill="rgba(255, 93, 115, 0.3)" stroke="#ff5d73" stroke-width="1.5"/>
            <!-- More branches -->
            <line x1="22" y1="90" x2="10" y2="102" stroke="#9fb1d0" stroke-width="1"/>
            <line x1="38" y1="90" x2="50" y2="102" stroke="#9fb1d0" stroke-width="1"/>
            <circle cx="10" cy="110" r="6" fill="rgba(255, 209, 102, 0.2)" stroke="#ffd166" stroke-width="1"/>
            <circle cx="50" cy="110" r="6" fill="rgba(255, 209, 102, 0.2)" stroke="#ffd166" stroke-width="1"/>
            <line x1="5" y1="116" x2="0" y2="126" stroke="#9fb1d0" stroke-width="1"/>
            <line x1="15" y1="116" x2="20" y2="126" stroke="#9fb1d0" stroke-width="1"/>
            <circle cx="0" cy="132" r="4" fill="rgba(255, 93, 115, 0.2)" stroke="#ff5d73" stroke-width="1"/>
            <circle cx="20" cy="132" r="4" fill="rgba(255, 93, 115, 0.2)" stroke="#ff5d73" stroke-width="1"/>
            <text x="75" y="160" style="font-size: 11px; fill: var(--muted); text-anchor: middle;">~50K nodes</text>
            <text x="75" y="178" style="font-size: 11px; fill: #ffd166; text-anchor: middle;">~100ms</text>
          </g>
          
          <!-- Depth 8 -->
          <g transform="translate(540, 0)">
            <text x="75" y="20" style="font-size: 14px; fill: var(--accent); font-weight: bold;">Depth 8</text>
            <ellipse cx="75" cy="90" rx="60" ry="50" fill="rgba(93, 208, 255, 0.1)" stroke="rgba(93, 208, 255, 0.3)" stroke-width="2" stroke-dasharray="5,3"/>
            <text x="75" y="85" style="font-size: 24px; text-anchor: middle;">üå≥</text>
            <text x="75" y="105" style="font-size: 10px; fill: var(--muted); text-anchor: middle;">Very Deep Tree</text>
            <text x="75" y="160" style="font-size: 11px; fill: var(--muted); text-anchor: middle;">~1M nodes</text>
            <text x="75" y="178" style="font-size: 11px; fill: #f87171; text-anchor: middle;">~2-5 sec</text>
          </g>
        </svg>
      </div>
    </div>

    <div class="concept-section">
      <h2>Principal Variation</h2>
      <p>
        The <span class="highlight">principal variation (PV)</span> is the sequence of moves that the AI considers 
        the best line of play if both players make optimal moves. In the diagnostics view, this is highlighted 
        as the "best path."
      </p>

      <div class="key-point">
        <strong>Example:</strong> If the principal variation is [3, 2, 4, 3], it means:
        <ul style="margin: 8px 0 0 20px;">
          <li>AI plays column 3</li>
          <li>AI predicts human will play column 2</li>
          <li>AI will then play column 4</li>
          <li>AI predicts human will play column 3</li>
        </ul>
      </div>
      
      <!-- Principal Variation Visualization -->
      <h3>üéØ Principal Variation Example</h3>
      <div class="tree-diagram">
        <svg width="700" height="280" viewBox="0 0 700 280">
          <!-- Main PV path highlighted -->
          <path d="M350,45 L200,100" class="tree-edge-static tree-edge-best"/>
          <path d="M200,140 L150,195" class="tree-edge-static tree-edge-best"/>
          <path d="M350,45 L500,100" class="tree-edge-static"/>
          <path d="M200,140 L250,195" class="tree-edge-static"/>
          <path d="M500,140 L450,195" class="tree-edge-static"/>
          <path d="M500,140 L550,195" class="tree-edge-static"/>
          
          <!-- Root -->
          <g>
            <rect x="300" y="20" width="100" height="45" rx="8" class="node-max node-best"/>
            <text x="350" y="38" class="node-text node-label">Current</text>
            <text x="350" y="53" class="node-text node-score">Best: Col 3</text>
          </g>
          
          <!-- Level 1 -->
          <g>
            <rect x="150" y="85" width="100" height="45" rx="8" class="node-min node-best"/>
            <text x="200" y="103" class="node-text node-label">ü§ñ AI: Col 3</text>
            <text x="200" y="118" class="node-text node-score" style="fill: #4ade80;">Score: +15</text>
          </g>
          <g>
            <rect x="450" y="85" width="100" height="45" rx="8" class="node-min"/>
            <text x="500" y="103" class="node-text node-label">ü§ñ AI: Col 4</text>
            <text x="500" y="118" class="node-text node-score">Score: +8</text>
          </g>
          
          <!-- Level 2 -->
          <g>
            <rect x="100" y="175" width="100" height="45" rx="8" class="node-max node-best"/>
            <text x="150" y="193" class="node-text node-label">üë§ Human: Col 2</text>
            <text x="150" y="208" class="node-text node-score" style="fill: #4ade80;">+15</text>
          </g>
          <g>
            <rect x="200" y="175" width="100" height="45" rx="8" class="node-max"/>
            <text x="250" y="193" class="node-text node-label">üë§ Human: Col 5</text>
            <text x="250" y="208" class="node-text node-score">+20</text>
          </g>
          <g>
            <rect x="400" y="175" width="100" height="45" rx="8" class="node-max"/>
            <text x="450" y="193" class="node-text node-label">üë§ Human: Col 2</text>
            <text x="450" y="208" class="node-text node-score">+8</text>
          </g>
          <g>
            <rect x="500" y="175" width="100" height="45" rx="8" class="node-max"/>
            <text x="550" y="193" class="node-text node-label">üë§ Human: Col 6</text>
            <text x="550" y="208" class="node-text node-score">+12</text>
          </g>
          
          <!-- PV Arrow annotation -->
          <text x="80" y="260" style="font-size: 12px; fill: var(--accent);">‚≠ê Principal Variation: Col 3 ‚Üí Col 2 ‚Üí ...</text>
        </svg>
      </div>
      
      <div class="step-explanation">
        <h4>üìç Reading the Principal Variation</h4>
        <p>The highlighted blue path shows the <strong>principal variation</strong>. Even though Human could play Col 5 for a higher score (+20), the AI assumes the human will play optimally and choose Col 2 which gives the AI a worse outcome (+15). This is why MIN nodes choose the <em>lowest</em> score‚Äîit represents the opponent's best response!</p>
      </div>
    </div>

    <div class="concept-section">
      <h2>üéÆ Game Complexity Comparison</h2>
      <p>Different games have vastly different search spaces. Here's how they compare:</p>
      
      <table class="comparison-table">
        <thead>
          <tr>
            <th>Game</th>
            <th>Game States</th>
            <th>Branching Factor</th>
            <th>Solved?</th>
            <th>Best AI</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Tic-Tac-Toe</strong> ‚ùå‚≠ï</td>
            <td>~5,500</td>
            <td>~4</td>
            <td class="good">‚úÖ Yes</td>
            <td>Perfect play (always tie)</td>
          </tr>
          <tr>
            <td><strong>Connect Four</strong> üî¥üü°</td>
            <td>~4.5 trillion</td>
            <td>~7</td>
            <td class="good">‚úÖ Yes (1988)</td>
            <td>First player wins with perfect play</td>
          </tr>
          <tr>
            <td><strong>Checkers</strong> ‚¨õ‚¨ú</td>
            <td>~5 √ó 10¬≤‚Å∞</td>
            <td>~2.8</td>
            <td class="good">‚úÖ Yes (2007)</td>
            <td>Perfect play = Draw</td>
          </tr>
          <tr>
            <td><strong>Chess</strong> ‚ôüÔ∏è</td>
            <td>~10‚Å¥‚Å∑</td>
            <td>~35</td>
            <td class="bad">‚ùå No</td>
            <td>Stockfish, AlphaZero</td>
          </tr>
          <tr>
            <td><strong>Go</strong> ‚ö´‚ö™</td>
            <td>~10¬π‚Å∑‚Å∞</td>
            <td>~250</td>
            <td class="bad">‚ùå No</td>
            <td>AlphaGo, KataGo</td>
          </tr>
        </tbody>
      </table>
      
      <div class="key-point">
        <strong>üí° What does "Solved" mean?</strong> A game is solved when the optimal move from any position is known. Connect Four was solved in 1988‚Äîwith perfect play, the first player always wins!
      </div>
    </div>

    <div class="concept-section">
      <h2>Try It Yourself!</h2>
      <p>
        Now that you understand the concepts, try playing the game and viewing the diagnostics to see minimax in action:
      </p>

      <div class="nav-buttons">
        <a href="{{ url_for('play') }}" class="btn">Play Connect Four</a>
        <a href="{{ url_for('analysis') }}" class="btn secondary">üîç View AI Analysis</a>
      </div>

      <div class="key-point">
        <strong>Teaching Tip:</strong> Start with a low search depth (2-3) to see how the AI makes decisions quickly. 
        Then increase the depth to see how it becomes more strategic. Compare the principal variations at different depths!
      </div>
    </div>

    <div class="concept-section">
      <h2>Further Learning</h2>
      <p>The minimax algorithm is foundational in game AI and appears in many classic games:</p>
      <ul style="line-height: 1.8; margin-left: 20px;">
        <li>Chess engines use advanced minimax with deep search and complex evaluation functions</li>
        <li>Checkers was "solved" using minimax, meaning perfect play is known</li>
        <li>Tic-tac-toe is simple enough to search completely</li>
        <li>Go uses variations of minimax combined with Monte Carlo Tree Search</li>
      </ul>
      
      <!-- Related concepts -->
      <h3>üîó Related Concepts to Explore</h3>
      <div class="visual-demo" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
        <div class="demo-card">
          <div class="value" style="font-size: 28px;">üé≤</div>
          <div class="label" style="margin-top: 8px; font-weight: 600;">Expectiminimax</div>
          <p style="font-size: 12px; color: var(--muted);">Handles games with chance elements (dice, cards)</p>
        </div>
        <div class="demo-card">
          <div class="value" style="font-size: 28px;">üå≤</div>
          <div class="label" style="margin-top: 8px; font-weight: 600;">Monte Carlo Tree Search</div>
          <p style="font-size: 12px; color: var(--muted);">Used in Go and modern game AI</p>
        </div>
        <div class="demo-card">
          <div class="value" style="font-size: 28px;">üß†</div>
          <div class="label" style="margin-top: 8px; font-weight: 600;">Neural Networks</div>
          <p style="font-size: 12px; color: var(--muted);">AlphaZero combines MCTS with deep learning</p>
        </div>
        <div class="demo-card">
          <div class="value" style="font-size: 28px;">üìö</div>
          <div class="label" style="margin-top: 8px; font-weight: 600;">Transposition Tables</div>
          <p style="font-size: 12px; color: var(--muted);">Caching to avoid re-evaluating positions</p>
        </div>
      </div>
    </div>

    <div style="margin: 40px 0; padding: 20px; background: rgba(93, 208, 255, 0.05); border-radius: 12px; text-align: center;">
      <p style="margin: 0; color: var(--accent);">
        Ready to explore? Head back to the game and watch the AI think!
      </p>
      <div class="nav-buttons" style="justify-content: center; margin-top: 16px;">
        <a href="{{ url_for('play') }}" class="btn">Start Playing</a>
      </div>
    </div>
  </div>
  
  <!-- Interactive Tree Animation Script -->
  <script>
    // Minimax Tree Step-through Animation
    (function() {
      const steps = [
        {
          title: "üéØ How to Read This Tree",
          desc: "Yellow nodes are <strong>MAX</strong> (AI wants highest score). Red nodes are <strong>MIN</strong> (Human wants lowest score). The leaf nodes show the evaluated scores. Click 'Step' to see how scores propagate up the tree!"
        },
        {
          title: "Step 1: Evaluate Leaf Nodes",
          desc: "The algorithm first evaluates the leaf nodes (bottom level). These are positions where we've reached our search depth limit. The heuristic function assigns scores: +3, +5, -2, +7, -4, +2.",
          highlight: ['node-4', 'node-5', 'node-6', 'node-7', 'node-8', 'node-9']
        },
        {
          title: "Step 2: MIN Node (Left) Chooses Minimum",
          desc: "The left MIN node has children with scores +3 and +5. Since the human player (MIN) wants the <em>lowest</em> score, they choose <strong>+3</strong>.",
          highlight: ['node-1', 'node-4', 'node-5'],
          scores: { 'score-1': '+3' }
        },
        {
          title: "Step 3: MIN Node (Center) Chooses Minimum",
          desc: "The center MIN node has children with scores -2 and +7. The human chooses the minimum: <strong>-2</strong>.",
          highlight: ['node-2', 'node-6', 'node-7'],
          scores: { 'score-2': '-2' }
        },
        {
          title: "Step 4: MIN Node (Right) Chooses Minimum",
          desc: "The right MIN node has children with scores -4 and +2. The human chooses <strong>-4</strong>.",
          highlight: ['node-3', 'node-8', 'node-9'],
          scores: { 'score-3': '-4' }
        },
        {
          title: "Step 5: MAX Node (Root) Chooses Maximum",
          desc: "Now the root MAX node sees three options: +3, -2, and -4. The AI (MAX) wants the <em>highest</em> score, so it chooses <strong>+3</strong> by playing Column 1!",
          highlight: ['node-root', 'node-1'],
          scores: { 'score-root': '+3' },
          bestPath: ['edge1', 'node-root', 'node-1', 'node-4']
        },
        {
          title: "‚úÖ Best Move Found!",
          desc: "The AI selects <strong>Column 1</strong> because it leads to the best guaranteed outcome (+3). Even if the human plays optimally, the AI can achieve at least +3. The highlighted path shows the <em>principal variation</em>.",
          highlight: ['node-root', 'node-1', 'node-4'],
          bestPath: ['edge1', 'edge4', 'node-root', 'node-1', 'node-4']
        }
      ];
      
      let currentStep = 0;
      let autoPlayInterval = null;
      
      const resetBtn = document.getElementById('resetTreeBtn');
      const stepBtn = document.getElementById('stepTreeBtn');
      const autoBtn = document.getElementById('autoTreeBtn');
      const stepNum = document.getElementById('treeStepNum');
      const totalSteps = document.getElementById('treeTotalSteps');
      const explanation = document.getElementById('treeExplanation');
      
      if (!resetBtn || !stepBtn) return;
      
      totalSteps.textContent = steps.length - 1;
      
      function updateDisplay() {
        const step = steps[currentStep];
        stepNum.textContent = currentStep;
        
        // Update explanation
        explanation.innerHTML = `<h4>${step.title}</h4><p>${step.desc}</p>`;
        
        // Reset all nodes
        document.querySelectorAll('.tree-node-static rect').forEach(rect => {
          rect.classList.remove('node-best');
        });
        document.querySelectorAll('.tree-edge-static').forEach(edge => {
          edge.classList.remove('tree-edge-best');
        });
        
        // Reset scores
        ['score-1', 'score-2', 'score-3', 'score-root'].forEach(id => {
          const el = document.getElementById(id);
          if (el && !steps.slice(0, currentStep + 1).some(s => s.scores && s.scores[id])) {
            el.textContent = '?';
          }
        });
        
        // Apply accumulated scores from all previous steps
        for (let i = 0; i <= currentStep; i++) {
          if (steps[i].scores) {
            Object.entries(steps[i].scores).forEach(([id, val]) => {
              const el = document.getElementById(id);
              if (el) el.textContent = val;
            });
          }
        }
        
        // Highlight current step elements
        if (step.highlight) {
          step.highlight.forEach(id => {
            const node = document.getElementById(id);
            if (node) {
              const rect = node.querySelector('rect');
              if (rect) rect.style.filter = 'brightness(1.3)';
            }
          });
        }
        
        // Show best path
        if (step.bestPath) {
          step.bestPath.forEach(id => {
            const el = document.getElementById(id);
            if (el) {
              if (el.tagName === 'path') {
                el.classList.add('tree-edge-best');
              } else {
                const rect = el.querySelector('rect');
                if (rect) rect.classList.add('node-best');
              }
            }
          });
        }
      }
      
      resetBtn.addEventListener('click', () => {
        currentStep = 0;
        if (autoPlayInterval) {
          clearInterval(autoPlayInterval);
          autoPlayInterval = null;
          autoBtn.classList.remove('active');
          autoBtn.textContent = '‚ñ∂ Auto Play';
        }
        updateDisplay();
      });
      
      stepBtn.addEventListener('click', () => {
        if (currentStep < steps.length - 1) {
          currentStep++;
          updateDisplay();
        }
      });
      
      autoBtn.addEventListener('click', () => {
        if (autoPlayInterval) {
          clearInterval(autoPlayInterval);
          autoPlayInterval = null;
          autoBtn.classList.remove('active');
          autoBtn.textContent = '‚ñ∂ Auto Play';
        } else {
          autoBtn.classList.add('active');
          autoBtn.textContent = '‚è∏ Pause';
          autoPlayInterval = setInterval(() => {
            if (currentStep < steps.length - 1) {
              currentStep++;
              updateDisplay();
            } else {
              clearInterval(autoPlayInterval);
              autoPlayInterval = null;
              autoBtn.classList.remove('active');
              autoBtn.textContent = '‚ñ∂ Auto Play';
            }
          }, 2000);
        }
      });
      
      // Initial display
      updateDisplay();
    })();
  </script>
</body>
</html>
